var e=require("react"),t=require("react-ssr-prepass"),n=require("urql");function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var i=r(t);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var u,o=null;function l(){o=null}function s(e,t){var r="undefined"==typeof window;return!r&&o||((o=n.createClient(a({},e,{suspense:t&&(r||e.suspense)}))).toJSON=function(){return null}),o}exports.initUrqlClient=s,exports.withUrqlClient=function(t,r){return r||(r={}),function(o){var c=Boolean((o.getInitialProps||r.ssr)&&!r.neverSuspend),f=function(i){var f=i.pageProps,p=i.urqlClient,d=i.urqlState,h=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&-1===t.indexOf(r)&&(n[r]=e[r]);return n}(i,["pageProps","urqlClient","urqlState"]),v=e.useReducer((function(e){return e+1}),0),g=v[0],q=v[1],x=f&&f.urqlState||d,C=e.useMemo((function(){if(p&&!g)return p;u&&"undefined"!=typeof window?g||u.restoreData(x):u=n.ssrExchange({initialState:x,isClient:!0,staleWhileRevalidate:"undefined"!=typeof window?r.staleWhileRevalidate:void 0});var e=t(u);return e.exchanges||(e.exchanges=[n.dedupExchange,n.cacheExchange,u,n.fetchExchange]),s(e,c)}),[p,x,g]),y=e.useCallback((function(){l(),u=n.ssrExchange({initialState:void 0}),q()}),[]);return e.createElement(n.Provider,{value:C},e.createElement(o,a({},h,{pageProps:f,urqlClient:C,resetUrqlClient:y})))};return f.displayName="withUrqlClient("+(o.displayName||o.name||"Component")+")",o.getLayout&&(f.getLayout=o.getLayout),(o.getInitialProps||r.ssr)&&(f.getInitialProps=function(u){try{let q=!1;function l(t){if(q)return t;function n(){return a({},g,{urqlState:d?d.extractData():void 0,urqlClient:v})}if("undefined"!=typeof window)return a({},g,{urqlClient:v});var u=a({},g,{urqlClient:v}),o=f?u:{pageProps:u};const l=function(){if(!r.neverSuspend)return Promise.resolve(i(e.createElement(c,o))).then((function(){}))}();return l&&l.then?l.then(n):n()}var c=u.AppTree,f=!!u.Component,p=f?u.ctx:u,d=n.ssrExchange({initialState:void 0}),h=t(d,p);h.exchanges||(h.exchanges=[n.dedupExchange,n.cacheExchange,d,n.fetchExchange]);var v=s(h,!r.neverSuspend);v&&(p.urqlClient=v);var g={};const x=function(){if(o.getInitialProps)return Promise.resolve(o.getInitialProps(u)).then((function(e){if(g=e,p.res&&(p.res.writableEnded||p.res.finished))return q=!0,a({},g,{urqlClient:v})}))}();return Promise.resolve(x&&x.then?x.then(l):l(x))}catch(e){return Promise.reject(e)}}),f}};
//# sourceMappingURL=next-urql.min.js.map
